# Agrolink: Enhancing Efficiency and Transparency in Bangladesh's Vegetable Supply Chain

![Agrolink Blockchain](https://github.com/user-attachments/assets/3c1c5ea5-089a-4f1c-8203-12f21f095ee3)

## 1. Introduction

This document provides a comprehensive guide to setting up a Hyperledger Fabric network for a food supply chain, specifically designed for the **Agrolink** project. The network enables interactions between three key organizations: **Buyer**, **Seller**, and **Government**. Each organization plays a crucial role in managing the lifecycle of transactions within the supply chain. This guide includes the network architecture, configuration, chaincode deployment, and usage instructions.

## 2. Network Architecture

### Organizations

- **Buyer**: The purchasing entity in the food supply chain.
- **Seller**: The supplier of food products.
- **Government (Gov)**: The regulatory authority ensuring compliance with food safety and trade regulations.

### Peers

Each organization operates one anchor peer that manages the ledger and executes smart contracts (chaincode).

- **Anchor Peer**: A peer node responsible for maintaining the ledger and enforcing the chaincode.

### Orderer

- **Solo Orderer**: A single-node orderer that handles the ordering service, ensuring transactions are processed and distributed consistently across the network.

### Channel

- **Channel Name**: `foodsupplychainchannel`
- A dedicated channel for all organizations to facilitate and manage transactions related to the food supply chain.

## 3. Prerequisites

Before setting up the network, ensure the following prerequisites are fulfilled:

- **Docker and Docker Compose**: These should be installed and running.
- **Hyperledger Fabric Binaries**: Ensure that the necessary binaries and Docker images for Hyperledger Fabric are downloaded and accessible.
- **Operating System**: A Linux-based system (preferably Ubuntu) is recommended for the setup.

## 4. Configuration Files

The network setup and configuration require the following key files:

### `generate-ca-config.sh`

This script generates the Certificate Authorities (CAs) required for each organization. The CA manages the identities of the members within each organization.

**Key Modifications**:
- Configure CA details for each organization (Buyer, Seller, Government).
- Define paths and filenames for the certificates and keys generated by the CA.

### `configtx/configtx.yaml`

This file defines the overall network topology, including organizations, consortium, and channel configurations.

**Key Modifications**:
- Update organization details such as MSP IDs and anchor peers.
- Configure the channel `foodsupplychainchannel` to include the Buyer, Seller, and Government organizations.

### `ccp-generate.sh`

This script generates the connection profile (CCP) for each organization. The CCP is crucial for applications to interact with the network.

**Key Modifications**:
- Modify organization-specific details such as MSP ID, peer addresses, and orderer endpoints.
- Ensure the correct channel name (`foodsupplychainchannel`) is used.

### `network.sh`

This primary script is responsible for setting up the network, including creating the channel, joining peers to the channel, and launching the network.

**Key Modifications**:
- Include steps for creating and joining the `foodsupplychainchannel`.
- Ensure all peers, orderers, and CAs are started and configured properly.

## 5. Chaincode Deployment

Chaincode (smart contract) is deployed on the network to automate and enforce rules and business logic. The following scripts and files are used to manage chaincode deployment:

### `deploy_01_order_place_and_letter_of_credit.sh`

This script is used to deploy the chaincode that manages the processes of placing orders and issuing letters of credit within the food supply chain.

### `deploy_food_supply_contract.sh`

This chaincode manages the food supply contracts, ensuring the terms and conditions between the Buyer and Seller are upheld.

### `deploy_transaction_contract.sh`

This script deploys the chaincode responsible for managing transactions, recording them on the blockchain, and validating their authenticity.

### `transaction-contract`

The `transaction-contract` directory contains the core logic of the chaincode, including:

- **lib**: Contains the core logic for transaction management.
- **index.js**: The entry point for the chaincode, initializing and setting up the transaction functions.
- **package.json** and **package-lock.json**: Manage the dependencies required by the chaincode.

## 6. Usage

Once the network is set up and the chaincode is deployed, you can perform various operations by invoking chaincode functions.

### Invoking Chaincode Functions

- **Create a Transaction**: Use the `invoke-createTransaction.sh` script to initiate a new transaction within the network.
- **Query All Transactions**: Run the `invoke-getalltransactions.sh` script to retrieve a list of all transactions recorded on the blockchain.
- **Initialize Ledger**: Use the `invoke-initledger.sh` script to populate the ledger with initial data, such as predefined transactions or assets.

## 7. Troubleshooting

Here are some common issues and their solutions:

- **Network Setup Issues**: Ensure all Docker containers are running correctly by using the `docker ps` command. If containers are not running, check the Docker logs for errors.
- **Chaincode Deployment Failures**: If chaincode fails to deploy, review the peer logs for connectivity issues or syntax errors in the chaincode.
- **Transaction Errors**: Ensure the correct parameters are being passed to chaincode functions and that all peers are synchronized and updated.

